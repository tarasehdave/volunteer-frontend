<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reviews</title>
<link rel="stylesheet" href="style.css">
<style>
    table {
        border-collapse: collapse;
        width: 100%;
    }

    th, td {
        border: 1px solid #dddddd;
        text-align: left;
        padding: 8px;
    }

    th {
        background-color: #f2f2f2;
    }
</style>
</head>
<body>

<div class="gallery">
    <div class="content">
        <img src="https://github.com/alaraipek/Issues/assets/115954616/b23553cc-80b8-4987-b21d-6bc89a2154cb">
        <h3>San Diego Refugee Tutoring</h3>
        <p>Tutor refugee and Thursdayys from 4pm to 6pm.</p>
        <h6>4877 Orange Ave, San Diego, CA 92115</h6>
        <button class="generate-button" onclick="toggleReview('San Diego Refugee Tutoring')">Rate</button>
    </div>
    <!-- Add more content blocks for other organizations -->
</div>

<div class="content">
    <img src="https://github.com/alaraipek/Issues/assets/115954616/de6e7289-1bd7-4c7b-93bb-e35c49b7e1e6">
    <h3>Youth Court</h3>
    <p>Teens tak the roles of lawyers and judges and hear cases about fellow students and hear their infractures</p>
    <h6>220 S Broadway, Escondido, CA 92025</h6>
    <button class="generate-button" onclick="toggleReview('Youth Court')">Rate</button>
</div>

</div>
<div class="content">
    <img src="https://github.com/alaraipek/Issues/assets/115954616/59713140-86ce-4939-9b3d-b522ca22fac2">
    <h3>Seattle Animal Shelter</h3>
    <p>Help animals get adopted to loving families</p>
    <h6>2061 15th Ave W, Seattle, WA, 98119</h6>
    <button class="generate-button" onclick="toggleReview('Seattle Animal Shelter')">Rate</button>
</div>


<!-- Container to display reviews -->
<div id="reviewContainer" style="display: none;">
    <h2>Reviews</h2>
    <table id="reviewTable">
        <thead>
            <tr>
                <th>Review ID</th>
                <th>Name</th>
                <th>Review</th>
                <th>Rate</th>
            </tr>
        </thead>
        <tbody id="reviewContent"></tbody>
    </table>
</div>

<script>
let reviewContainerVisible = false;

function toggleReview(name) {
    const reviewContainer = document.getElementById('reviewContainer');
    if (!reviewContainerVisible) {
        // Construct the URL with the provided name
        const url = `http://127.0.0.1:8085/reviews/${name}`;

        // Fetch reviews for the specified name
        fetch(url)
            .then(response => {
                // Check if the response is successful
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                // Parse the JSON response
                return response.json();
            })
            .then(reviews => {
                // Handle the reviews data
                console.log('Reviews:', reviews);
                // Construct HTML for reviews
                let reviewHTML = '';
                reviews.forEach(review => {
                    reviewHTML += `<tr>
                                        <td>${review.id}</td>
                                        <td>${review.name}</td>
                                        <td>${review.review}</td>
                                        <td>${review.rate}</td>
                                    </tr>`;
                });
                // Display reviews in the review container
                const reviewContent = document.getElementById('reviewContent');
                reviewContent.innerHTML = reviewHTML;
                reviewContainer.style.display = 'block';
                reviewContainerVisible = true;
            })
            .catch(error => {
                // Handle any errors that occurred during the fetch
                console.error('Error fetching reviews:', error.message);
            });
    } else {
        // Hide the review container
        reviewContainer.style.display = 'none';
        reviewContainerVisible = false;
    }
}
</script>

</body>
</html>